<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3D å¡ä¸è½¦å°æ¸¸æˆ ğŸš—</title>
  <style>
    body { margin: 0; overflow: hidden; background-color: #111; }
    #loading {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      display: flex; justify-content: center; align-items: center;
      background-color: black; color: white; font-size: 24px;
      animation: fadeOut 2s ease 2s forwards;
    }
    @keyframes fadeOut {
      to { opacity: 0; visibility: hidden; }
    }
  </style>
</head>
<body>
  <div id="loading">ç†Šåšæ¬¢è¿æ¥åˆ°ä¸ºä½ å®šåˆ¶çš„å››å·ç¾é£Ÿå¡ä¸è½¦æ¸¸æˆ ğŸš—ğŸ”¥</div>
  <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/OrbitControls.js"></script>
  <script>
    // åˆ›å»ºåœºæ™¯
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x222222);

    // æ‘„åƒæœº
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(0, 3, 6);

    // æ¸²æŸ“å™¨
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // ç¯å¢ƒå…‰
    const light = new THREE.AmbientLight(0xffffff, 0.8);
    scene.add(light);

    // å¹³é¢åœ°é¢
    const groundGeo = new THREE.PlaneGeometry(30, 30);
    const groundMat = new THREE.MeshPhongMaterial({ color: 0x333333 });
    const ground = new THREE.Mesh(groundGeo, groundMat);
    ground.rotation.x = -Math.PI / 2;
    scene.add(ground);

    // å¡ä¸è½¦ä¸»ä½“ï¼ˆç®€åŒ–æ¨¡å‹ï¼‰
    const carBody = new THREE.Mesh(
      new THREE.BoxGeometry(1, 0.4, 2),
      new THREE.MeshPhongMaterial({ color: 0xff4444 })
    );
    scene.add(carBody);

    // è½®å­
    const wheelGeo = new THREE.CylinderGeometry(0.2, 0.2, 0.5, 32);
    const wheelMat = new THREE.MeshPhongMaterial({ color: 0x222222 });
    const wheels = [];
    const wheelPos = [
      [0.5, -0.2, 0.9], [-0.5, -0.2, 0.9],
      [0.5, -0.2, -0.9], [-0.5, -0.2, -0.9]
    ];
    for (let [x, y, z] of wheelPos) {
      const w = new THREE.Mesh(wheelGeo, wheelMat);
      w.rotation.z = Math.PI / 2;
      w.position.set(x, y, z);
      scene.add(w);
      wheels.push(w);
    }

    // æ§åˆ¶
    const controls = new THREE.OrbitControls(camera, renderer.domElement);

    // ç§»åŠ¨å˜é‡
    let speed = 0;
    const keys = {};

    document.addEventListener("keydown", e => keys[e.key] = true);
    document.addEventListener("keyup", e => keys[e.key] = false);

    function animate() {
      requestAnimationFrame(animate);

      // å‰è¿›åé€€
      if (keys["ArrowUp"]) speed += 0.01;
      if (keys["ArrowDown"]) speed -= 0.01;
      speed *= 0.98;

      // å·¦å³
      if (keys["ArrowLeft"]) carBody.rotation.y += 0.05;
      if (keys["ArrowRight"]) carBody.rotation.y -= 0.05;

      carBody.position.x -= Math.sin(carBody.rotation.y) * speed;
      carBody.position.z -= Math.cos(carBody.rotation.y) * speed;

      renderer.render(scene, camera);
    }

    animate();

    window.addEventListener("resize", () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
